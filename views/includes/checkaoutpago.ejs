<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Accept a card payment</title>
    <meta name="description" content="A demo of a card payment on Stripe" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/checkoutTarjeta.css" />
  	<script src="https://js.stripe.com/v3/"></script>
	<script>
		<%- include('../../Pagos/checkoutCliente.js') %>
	</script>
	
	<script
	  src="https://code.jquery.com/jquery-3.5.1.min.js"
	  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
	  crossorigin="anonymous">
	</script>
	

	<script>
		// onclick="mandarProductos()"
		function mandarProductos(){
		var productosPorPedir = document.createElement("INPUT");
			productosPorPedir.setAttribute("type", "text");
		 
		 var arrayObjetos = [];
			for(var i=1;i<sessionStorage.length;i++){	//si tienes problemas con la cantidad de objetos cambia el .lenght por sessionStorage.getItem("numObjetos")
				arrayObjetos.push(sessionStorage.getItem("producto" + i));
			}
		 
		 productosPorPedir.value = arrayObjetos;
		 productosPorPedir.name = "ProductosPorPedir";
 	     alert(productosPorPedir.value);
		 //Esta parte es la que lo hace jalar como input submit
		 var SubButton = document.getElementById("forma");
		 productosPorPedir.style.display = "none";
		 SubButton.appendChild(productosPorPedir);
		 //window.open("/pagoProcesado","ventana1","width=600,height=400,scrollbars=NO,top=300,left=400"); //por alguna razon el left no carga en monitores secundarios en chrome
		 SubButton.submit();
		}
	</script>
</head>

<body>
		
	
	<!-- Display a payment form -->
	<div class="izquierda">
	
	
		
		
	<form id="payment-form">
			<h1 class="tituloTarjeta">Introduzca los datos de su tarjeta para pagar</h1>
		<div id="card-element"><!--Stripe.js injects the Card Element--></div>
		<div type=submit>
		<button id="submit">
			<div class="spinner hidden" id="spinner"></div>
			<span id="button-text">Pagar</span>
		</button>
			</div>
		<p id="card-error" role="alert"></p>
		<p class="result-message hidden">
			Payment succeeded, see the result in your
			<a href="" target="_blank">Stripe dashboard.</a> Refresh the page to pay again.
		</p>
	</form>
	
		<h2 class="disclaimer">
			<a class="TituloNoEspecifico disclaimer1">Disclaimer</a>  <br><br><br>
			<div class="textoDisclaimer">
			Recuerde revisar que esten correctos tus datos antes de pagar. De esta manera evitamos errores de envio y su insatisfaccion. Le recordamos que unicamente guardaremos su informacion de envio y la informacion de sus tarjetas nunca es almacenada por temas de seguridad. Mantendremos la informacion de envio mientras  entregamos su pedido y despues se destruira<br></div>
		</h2>
	</div>
		
</body>
</html>	